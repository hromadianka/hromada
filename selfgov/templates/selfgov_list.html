{% extends "base.html" %}
{% load i18n %}
{% load static %}

{% block content %}

<div class="container">
    <h1>{% trans 'Self-government' %}</h1>

    <div class="callout" style="margin-bottom: 15px">
        <img src="{% static 'images/icons/classical-building.jpg' %}" alt="" />
        <span>
            {% trans 'Доєднуйся до рад там, де ви живете, навчаєтесь або працюєте, і бери участь в управлінні Кримом' %}
        </span>
    </div>

    <div style="margin: 50px 0 0 0" class="">
        <select name="selfgov_type" 
                hx-get="{% url 'selfgov_list' %}" 
                hx-trigger="change" 
                hx-target="#card-container" 
                hx-indicator=".loader"
                class="form-field">
            <option value="">All Types</option>
            {% for selfgovs_type in selfgovs_types %}
            <option value="{{ selfgovs_type.id }}">{% trans selfgovs_type.description %}</option>
            {% endfor %}
        </select>
    </div>

    <div id="card-container" class="projects-container" style="padding-top: 40px; padding-bottom: 40px">
        {% for selfgov in selfgovs %}
        <div class="card">
            <h3 style="margin-bottom: 0">
                <a href="{% url 'selfgov_detail' selfgov.id %}">{{ selfgov.title }}</a>
            </h3>
            <p class="soviet-type" style="margin-bottom: 10px">
                {{ selfgov.soviet_type.name }}
            </p>
            <p>{{ selfgov.description|striptags|truncatechars:160|safe|default:"" }}</p>
        </div>
        {% endfor %}
        <div class="loader htmx-indicator">Preloader...</div>
    </div>

    <a class="button" style="margin-top: 20px" href="{% url 'selfgov_create' %}">{% trans 'Create a council'  %}</a>
</div>

{% endblock %}
